<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Hangman Game</title>
	<link rel="stylesheet" href="css/reset.css">
	<link rel="stylesheet" href="css/style.css">
</head>
<body background="images/bgreversed.png">

	<div id="hangmangame">

	</div>

	<script type="text/javascript">
	 
	var pos = 0;
	var tries = 0;
	var losses = 0;
	var wins = 0;
	var alphaChars = "[a-z]"; // valid chars
	var storeGoodLetters = [];
	var storeBadLetters = [];
	var storeAllLetters = [];
	var goodGuessLetters = [];
	var pp;
	var badGuesses = 0;
	var underBar = '_';	

	// sounds
	var drumCymbal = new Audio('sounds/drumCymbal.mp3');
	var clownHorn = new Audio('sounds/clownHorn.mp3');
	var notagain = new Audio('sounds/notagain.mp3');
	
	// figure out target word
	var dictionary = ['abbreviate','salutations','initiate', 'pattern', 'jazz', 'abruptly'];
	console.log(dictionary);
	var targetWord = dictionary[Math.floor(Math.random() * dictionary.length)];
	// immediately fix the array so that the next word is not duplicated	
	var iDictionary = dictionary.indexOf("targetWord");
	if(iDictionary != -1) {
		dictionary.splice(iDictionary, 1);
	}
	console.log(dictionary);
	var targetLetters = targetWord.split("");
	var lengthOfGame = targetLetters.length;
	
	// functions
	function isInArray(value, array) {
	  return array.indexOf(value) > -1;
	}
	function isLetter(str) {
		return str.length === 1 && str.match(/[a-z]/i);
	}
	
	for ( var i = 0; i < targetLetters.length; i++) {
		goodGuessLetters.push( underBar);
	}

	console.log("blanks ", goodGuessLetters);

	// Captures Key Clicks
	document.onkeyup = function(event) {

	// Determines which exact key was selected. Make it lowercase
	var userInput = String.fromCharCode(event.keyCode).toLowerCase();
	//for ( var i = 0; i < targetLetters.length; i++) {
		
		if ( isLetter(userInput) ) {
			if ( userInput) {
				if ( targetLetters.indexOf(userInput)  > -1) {
					storeGoodLetters.push(userInput);
					pos = targetLetters.indexOf(userInput);
					goodGuessLetters.splice( pos, 1, userInput);
					console.log( goodGuessLetters );
					//drumCymbal.play();
				}
				else {
					storeBadLetters.push(userInput);
					console.log(userInput);
					console.log(storeBadLetters);
					badGuesses++;
					lengthOfGame--;
					//if ( badGuesses == 3) {
					//	notagain.play();
					//}
					//else {
					//clownHorn.play();
					//}
				}
			storeAllLetters.push(userInput);		
		 	}
			var html = 				
				"<p>" + 
				goodGuessLetters + 
				"</p> <p> guesses left " + 
				lengthOfGame +
				"</p>";

				document.querySelector('#hangmangame').innerHTML = html; 
		} //if isLetter
		else {
			alert ("Oops, alpha characters only!, Please try again.")
		}
	} 

</script>
</body>
</html>